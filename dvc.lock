schema: '2.0'
stages:
  prepare_lidar:
    cmd: python src/steps/prepare_lidar.py data/aoi/aoiTEST.shp data/lidar data/prepared/lidar
    deps:
    - path: data/aoi
      hash: md5
      md5: f27b76eb06e15064504b2822d2a008b9.dir
      size: 1093
      nfiles: 6
    - path: data/lidar
      hash: md5
      md5: 5816648f8ffe2821794d09f4126e3b22.dir
      size: 2877268127
      nfiles: 9
    - path: src/steps/prepare_lidar.py
      hash: md5
      md5: 27d1e18f6b3dbe1d053a42b5540479ee
      size: 5321
    outs:
    - path: data/prepared/lidar
      hash: md5
      md5: 96ed2ee839e0549d7a02c96e692f54c7.dir
      size: 29684302
      nfiles: 10
  prepare_imagery:
    cmd: python src/steps/prepare_imagery.py data/prepared/lidar/subset.csv data/imagery
      data/prepared/imagery
    deps:
    - path: data/imagery
      hash: md5
      md5: 3da288053f1df643d88c6076d621835c.dir
      size: 1516556490
      nfiles: 22
    - path: data/prepared/lidar
      hash: md5
      md5: 96ed2ee839e0549d7a02c96e692f54c7.dir
      size: 29684302
      nfiles: 10
    - path: src/steps/prepare_imagery.py
      hash: md5
      md5: b70138c34146f0263ce4f627057fec80
      size: 5430
    outs:
    - path: data/prepared/imagery
      hash: md5
      md5: cbf4026850f85b841a52f40eea3db33e.dir
      size: 30382214
      nfiles: 1
  split:
    cmd: python src/steps/split.py data/prepared/imagery/subset_raster.csv data/split
    deps:
    - path: data/prepared/imagery
      hash: md5
      md5: cbf4026850f85b841a52f40eea3db33e.dir
      size: 30382214
      nfiles: 1
    - path: src/steps/split.py
      hash: md5
      md5: 61daa7a53d9ff7ee5fb95cd7c7f7f0be
      size: 1409
    outs:
    - path: data/split
      hash: md5
      md5: 543bd19b4904963b34c06715b327a251.dir
      size: 5055546
      nfiles: 4
  train:
    cmd: python src/steps/train.py data/split data/model
    deps:
    - path: data/split
      hash: md5
      md5: 543bd19b4904963b34c06715b327a251.dir
      size: 5055546
      nfiles: 4
    - path: src/steps/train.py
      hash: md5
      md5: 78e93dce9815c43eafeca15c950a0618
      size: 2975
    outs:
    - path: data/model
      hash: md5
      md5: 53b5c35a8109f9d4a8927234e6015cec.dir
      size: 57310612
      nfiles: 1
  evaluate:
    cmd: python src/steps/evaluate.py data/split data/model/stacking.pkl data/evaluate
    deps:
    - path: data/model
      hash: md5
      md5: 53b5c35a8109f9d4a8927234e6015cec.dir
      size: 57310612
      nfiles: 1
    - path: data/split
      hash: md5
      md5: 543bd19b4904963b34c06715b327a251.dir
      size: 5055546
      nfiles: 4
    - path: src/steps/evaluate.py
      hash: md5
      md5: 58c43ebdd70fb1f0a7ae45c8d88ee11b
      size: 912
    outs:
    - path: data/evaluate
      hash: md5
      md5: ef7982922913cf9bdd0f0d4fa12acdeb.dir
      size: 29
      nfiles: 1
